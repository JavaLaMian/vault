<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.vault.demo.dao.UserimfDao">
    <insert id="addUser" parameterType="com.vault.demo.bean.Userimf" useGeneratedKeys="true">
        <selectKey keyColumn="uId" resultType="integer" keyProperty="uId" order="AFTER">
            select LAST_INSERT_ID()
        </selectKey>
        <![CDATA[
          insert into userimf values(#{uId},#{uName},#{account},#{phe},#{email},#{loginPsw},
          #{dealPsw},#{regTime},#{avaBalance},#{interest},#{frozfund},#{bounty},
          #{sex},#{refereer},#{creditLv},#{age},#{lastLoginTime},#{place})
        ]]>
    </insert>
    <select id="allList" resultType="com.vault.demo.bean.Userimf">
        <![CDATA[
          select * from userimf
        ]]>
    </select>

    <delete id="deleteById" parameterType="com.vault.demo.bean.Userimf">
        delete from userimf where uId = #{uId}
    </delete>

    <select id="selectByUserimf" parameterType="com.vault.demo.bean.Userimf" resultType="com.vault.demo.bean.Userimf">
        <![CDATA[
          select * from userimf where 1 = 1
        ]]>
        <if test="account != null and account != ''">
            and account = #{account}
        </if>
        <if test="email != null and email != ''">
            and email = #{email}
        </if>
        <if test="uId != null and uId != ''">
            and uId = #{uId}
        </if>
    </select>
    <update id="upUser">
        <![CDATA[
          update userimf set uName=#{uName},account=#{account},phe=#{phe},email=#{email},loginPsw=#{loginPsw},
          dealPsw=#{dealPsw},regTime=#{regTime},avaBalance=#{avaBalance},interest=#{interest},frozfund=#{frozfund},bounty=#{bounty},
          sex=#{sex},refereer=#{refereer},creditLv=#{creditLv},age=#{age},lastLoginTime=#{lastLoginTime},place=#{place} where uId=#{uId}
        ]]>
    </update>

    <select id="selectOneByLogin" parameterType="com.vault.demo.bean.Userimf" resultType="com.vault.demo.bean.Userimf">
        <![CDATA[
          select * from userimf where 1 = 1
        ]]>
        <if test="account != null and account != ''">
            and account = #{account} and loginPsw = #{loginPsw}
        </if>
        <if test="email != null and email != ''">
            and email = #{email} and loginPsw = #{loginPsw}
        </if>
    </select>

    <update id="updateUserAccount">
        <![CDATA[
          update userimf set account=#{account} where uId = #{uId}
        ]]>
    </update>

    <update id="updateUserPwd">
        <![CDATA[
          update userimf set loginPsw=#{loginPsw} where email = #{email}
        ]]>
    </update>
</mapper>